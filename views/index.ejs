<%- include("partials/header.ejs") %>

<div class="my-3 p-3 bg-body rounded shadow-sm">
    <h1>My Blog</h1>
    <h6 class="border-bottom pb-2 mb-0">Recent updates</h6>
    <div class="text-left">
        <form class="d-flex justify-content-start mt-5" action="/comment" method="POST">
            <button type="submit" class="btn btn-success">New Post</button>
        </form>
    </div>
    <hr>    

    <% if(locals.posts.length<=0) {%>
        <p>
            not post
        </p>
    <% }else{ %>
        <% for(let i = 0 ;i < posts.length;i++){ %>
            <div class="d-flex flex-column text-body-secondary pt-3">
      
                <h4 class="mb-2"> <%= posts[i].title  %></h4>
                <p class=" text-gray-dark mb-4"> <%=posts[i].date%></p>
                <br>

                <% if(!locals.posts[i].contentTexts) {%>
                    <p> no content</p>
                <% }else{ %>
                    <p><%=posts[i].contentTexts%> </p>
                    
                    <div class="d-flex align-items-center my-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                        </svg>
                        <p class=" text-gray-dark  ms-2">by <%=posts[i].names%></p>
                    </div>
                   

                    <div class="me-auto">
                        <form class="mt-1"  method="POST">
                            <input type="hidden" name="id" value="<%= posts[i].id %>" formaction="/delete" >
                            <button type="submit" class="btn btn-danger btn-sm" formaction="/delete" >delete</button>
                            <input type="hidden" name="id" value="<%= posts[i].id %>" formaction="/edit" >
                            <button type="submit" class="btn btn-info btn-sm" formaction="/edit">edit</button>
                        </form>   
                       
                    </div>

                    <hr>    

                <% }%>
            </div>
            
        <% }%>    
    <% } %>

</div>
